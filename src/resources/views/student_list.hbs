<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="images/icons/favicon.ico" />

    <link rel="stylesheet" type="text/css" href="vendor/bootstrap/css/bootstrap.min.css">

    <link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.7.0/css/font-awesome.min.css">

    <link rel="stylesheet" type="text/css" href="vendor/animate/animate.css">

    <link rel="stylesheet" type="text/css" href="vendor/select2/select2.min.css">

    <link rel="stylesheet" type="text/css" href="vendor/perfect-scrollbar/perfect-scrollbar.css">

    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <script src="/scripts/admin.js"></script>

    <link rel="stylesheet" type="text/css" href="css/util.css">
    <link rel="stylesheet" type="text/css" href="css/table.css">
    <style>
        .column1 {
            width: 20%;
        }

        .column2 {
            width: 20%
        }

        .column3 {
            width: 25%
        }

        .column4 {
            width: 2%
        }

        .column5 {
            width: 2%
        }

        .column6 {
            width: 2%
        }
    </style>
    <meta name="robots" content="noindex, follow">
    <script
        nonce="7fe0b1a4-f47f-4ea6-9aa1-e8dc2cfcea9b">(function (w, d) { !function (bv, bw, bx, by) { bv[bx] = bv[bx] || {}; bv[bx].executed = []; bv.zaraz = { deferred: [], listeners: [] }; bv.zaraz.q = []; bv.zaraz._f = function (bz) { return function () { var bA = Array.prototype.slice.call(arguments); bv.zaraz.q.push({ m: bz, a: bA }) } }; for (const bB of ["track", "set", "debug"]) bv.zaraz[bB] = bv.zaraz._f(bB); bv.zaraz.init = () => { var bC = bw.getElementsByTagName(by)[0], bD = bw.createElement(by), bE = bw.getElementsByTagName("title")[0]; bE && (bv[bx].t = bw.getElementsByTagName("title")[0].text); bv[bx].x = Math.random(); bv[bx].w = bv.screen.width; bv[bx].h = bv.screen.height; bv[bx].j = bv.innerHeight; bv[bx].e = bv.innerWidth; bv[bx].l = bv.location.href; bv[bx].r = bw.referrer; bv[bx].k = bv.screen.colorDepth; bv[bx].n = bw.characterSet; bv[bx].o = (new Date).getTimezoneOffset(); if (bv.dataLayer) for (const bI of Object.entries(Object.entries(dataLayer).reduce(((bJ, bK) => ({ ...bJ[1], ...bK[1] }))))) zaraz.set(bI[0], bI[1], { scope: "page" }); bv[bx].q = []; for (; bv.zaraz.q.length;) { const bL = bv.zaraz.q.shift(); bv[bx].q.push(bL) } bD.defer = !0; for (const bM of [localStorage, sessionStorage]) Object.keys(bM || {}).filter((bO => bO.startsWith("_zaraz_"))).forEach((bN => { try { bv[bx]["z_" + bN.slice(7)] = JSON.parse(bM.getItem(bN)) } catch { bv[bx]["z_" + bN.slice(7)] = bM.getItem(bN) } })); bD.referrerPolicy = "origin"; bD.src = "/cdn-cgi/zaraz/s.js?z=" + btoa(encodeURIComponent(JSON.stringify(bv[bx]))); bC.parentNode.insertBefore(bD, bC) };["complete", "interactive"].includes(bw.readyState) ? zaraz.init() : bv.addEventListener("DOMContentLoaded", zaraz.init) }(w, d, "zarazData", "script"); })(window, document);</script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous">

</head>

<body>
    {{>sidebar admin=true}}
    <section class="main_container">

<<<<<<< HEAD
            </tr>
        </thead>
        <tbody>
            {{#each student}}
            <tr>
                <th scope="row" id="class-code">{{this.name}}</th>
                <td id="class-name">{{this.studentID}}</td>
                <td id="credits">{{this.date_of_birth}}</td>
                <td id="teacher">{{this.course_class}}</td>
                <td id="datetime">{{this.phone_number}}</td>
                <td id="room">{{this.email}}</td>
                <td>
                    <a href="/{{this._id}}/edit-student" class="btn btn-link">Sửa</a> 
                    <a href="" class="btn btn-link" data-bs-toggle="modal" data-id="{{this._id}}" data-bs-target="#deleteModal">Xóa</a> 
                    
                    
                </td>
            </tr>
            {{/each}}
        </tbody>
<<<<<<< HEAD
        <a id="admin-add-student" class="btn btn-link">Thêm sinh viên</a>
=======
        <a href="/add-student" class="btn btn-link">Thêm sinh viên</a>      
>>>>>>> 6828b11 (delete student)
    </table>
=======
>>>>>>> f10b601 (fix page)

        <h1 style="font-family: Lato-Bold;text-align:center;color: #4272d7">Danh sách sinh viên</h1>
        <div class="limiter">
            <div class="container-table100">
                <div class="wrap-table100">
                    <div class="table100 ver1 m-b-110">
                        <div class="table100-head">
                            <table>
                                <thead>
                                    <tr class="row100 head">
                                        <th class="cell100 column1">Mã sinh viên</th>
                                        <th class="cell100 column2">Họ và tên</th>
                                        <th class="cell100 column3">Lớp</th>
                                        <th class="cell100 column4"></th>
                                        <th class="cell100 column5"></th>
                                        <th class="cell100 column6">
                                            <a href="http://localhost:3000/add-student">
                                                <i class='bx bxs-message-square-add'
                                                    style="color:rgb(255, 255, 255); font-size: 30px;"> </i>
                                            </a>

                                        </th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <div class="table100-body js-pscroll">
                            <table>
                                <tbody>
                                    {{#each student}}
                                    <tr class="row100 body">
                                        <td class="cell100 column1">{{this.studentID}}</td>
                                        <td class="cell100 column2">{{this.name}}</td>
                                        <td class="cell100 column3">{{this.course_class}}</td>
                                        <td class="cell100 column4"><ion-icon name="eye"></ion-icon></td>
                                        <td class="cell100 column5">
                                            <a href="/{{this._id}}/edit-student"><ion-icon name="open"></ion-icon></a>

                                        </td>
                                        <td class="cell100 column6">
                                            <a class="btn btn-link" data-bs-toggle="modal" data-id="{{this._id}}"
                                                data-bs-target="#deleteModal"><ion-icon name="trash"></ion-icon></a>
                                        </td>

                                    </tr>

                                    {{/each}}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        {{!-- Confirm delete --}}
        <div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="exampleModalLabel">Xóa sinh viên</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        Bạn có chắc chắn muốn xóa?
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                        <button id="btn-delete" type="button" class="btn btn-danger">Xóa</button>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <script src="vendor/jquery/jquery-3.2.1.min.js"></script>

    <script src="vendor/bootstrap/js/popper.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.min.js"></script>

    <script src="vendor/select2/select2.min.js"></script>

    <script src="vendor/perfect-scrollbar/perfect-scrollbar.min.js"></script>
    <script>
        $('.js-pscroll').each(function () {
            var ps = new PerfectScrollbar(this);

            $(window).on('resize', function () {
                ps.update();
            })
        });
    </script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-23581568-13"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-23581568-13');
    </script>

    <script src="/scripts/table.js"></script>
    <script defer
        src="https://static.cloudflareinsights.com/beacon.min.js/v2b4487d741ca48dcbadcaf954e159fc61680799950996"
        integrity="sha512-D/jdE0CypeVxFadTejKGTzmwyV10c1pxZk/AqjJuZbaJwGMyNHY3q/mTPWqMUnFACfCTunhZUVcd4cV78dK1pQ=="
        data-cf-beacon='{"rayId":"7b6bd136cb3191ab","token":"cd0b4b3a733644fc843ef0b185f98241","version":"2023.3.0","si":100}'
        crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-qKXV1j0HvMUeCBQ+QVp7JcfGl760yU08IQ+GpUo5hlbpg51QRiuqHAJz8+BrxE/N"
        crossorigin="anonymous"></script>
    <script>

    </script>
    <script src="ajax.googleapis.com/ajax/libs/jquery/2.1.3/…"></script>
    <script src="maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/…"></script>
    <script src="https://code.jquery.com/jquery-3.6.4.slim.min.js"
        integrity="sha256-a2yjHM4jnF9f54xUQakjZGaqYs/V1CYvWpoqZzC2/Bw=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.7/dist/umd/popper.min.js"
        integrity="sha384-zYPOMqeu1DAVkHiLqWBUTcbYfZ8osu1Nd6Z89ify25QV9guujx43ITvfi12/QExE"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.min.js"
        integrity="sha384-Y4oOpwW3duJdCWv5ly8SCFYWqFDsfob/3GkgExXKV4idmbt98QcxXYs9UoXAB7BZ"
        crossorigin="anonymous"></script>
</body>


</html>

<form name="delete-form" method="POST" action=""></form>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        var studentId;
        var deleteForm = document.forms['delete-form']
        var btnDel = document.getElementById('btn-delete')
        $('#deleteModal').on('show.bs.modal', function (event) {
            var button = $(event.relatedTarget)
            studentId = button.data('id')
            console.log(studentId)
        })

        btnDel.onclick = function () {
            deleteForm.action = '/' + studentId + '?_method=DELETE'
            deleteForm.submit()
        }
    })

</script>